#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
hello_github.py
ä¸€ä¸ªè¶…ç®€å•çš„æµ‹è¯•è„šæœ¬ï¼š
- æ‰“å°ä¿¡æ¯ï¼ˆè¯æ˜èƒ½è¿è¡Œï¼‰
- å†™å…¥ run.logï¼ˆè¯æ˜æœ‰è¾“å‡ºï¼‰
- è¯»å– data.txtï¼ˆå¦‚æœå­˜åœ¨ï¼‰
"""

from __future__ import annotations
from pathlib import Path
from datetime import datetime


def main() -> None:
    here = Path(__file__).resolve().parent
    now = datetime.now().strftime("%Y-%m-%d %H:%M:%S")

    msg_lines = [
        "âœ… Hello from GitHub repo!",
        f"ğŸ•’ Time: {now}",
        f"ğŸ“ Current folder: {here}",
    ]

    data_file = here / "data.txt"
    if data_file.exists():
        content = data_file.read_text(encoding="utf-8", errors="replace").strip()
        msg_lines.append("ğŸ“„ data.txt found. Content preview:")
        msg_lines.append(content[:200] if content else "(data.txt is empty)")
    else:
        msg_lines.append("â„¹ï¸ data.txt not found. (You can create it to test reading.)")

    out = "\n".join(msg_lines)
    print(out)

    # write a log
    log_file = here / "run.log"
    log_file.write_text(out + "\n", encoding="utf-8")
    print(f"ğŸ“ Wrote log to: {log_file}")


if __name__ == "__main__":
    main()